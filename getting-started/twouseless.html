
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>The first two (useless) code Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="The Starterkit team and contributors">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-panels/panels.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-katex-auto-render/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../another-section/" />
    
    
    <link rel="prev" href="formatting-examples.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    The bender tutorials
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="../CONTRIBUTING.html">
            
                <a href="../CONTRIBUTING.html">
            
                    
                    Contributing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="./">
            
                <a href="./">
            
                    
                    Getting started
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="formatting-examples.html">
            
                <a href="formatting-examples.html">
            
                    
                    Examples of formatting
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="2.1.2" data-path="twouseless.html">
            
                <a href="twouseless.html">
            
                    
                    The first two (useless) code
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../another-section/">
            
                <a href="../another-section/">
            
                    
                    Another top level section
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../another-section/subsection.html">
            
                <a href="../another-section/subsection.html">
            
                    
                    A subsection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1.1" data-path="../another-section/subsubsection.html">
            
                <a href="../another-section/subsubsection.html">
            
                    
                    A subsubsection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <a target="_blank" href="ref://bender-tutorials.pdf">
            
                    
                    Download PDF
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >The first two (useless) code</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="the--first--two-almost-useless-but-highly-illustrative-examples">The  first  two almost <em>useless</em>, but highly <em>illustrative</em> examples</h1>
<p><div class="panel panel-warning"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(3801498695);" id="learning-objectives"><i class="fa fa-line-chart"></i> Learning objectives<span id="heading-3801498695"></span></h3></div><div class="panel-body" id="panel-3801498695"><ul>
<li>Understand the overall structure of Bender <em>module</em> using oversimplified examples </li>
</ul>
</div></div></p>
<h2 id="do-nothing"><em>Do-nothing</em></h2>
<p>Any <em>valid</em> Bender module must have essential parts </p>
<ul>
<li>function <code>run</code>  with the predefined signature </li>
<li>function <code>configure</code> with the predefiend dignature </li>
</ul>
<p>For the most trivial (<em>&quot;do-nothing&quot;</em>) scenario function <code>run</code> is</p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">run</span> <span class="hljs-params">( nEvents )</span> :</span>
    <span class="hljs-comment"># some fictive event loop </span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range( <span class="hljs-number">0</span> , min( nEvents , <span class="hljs-number">10</span> ) ) :  <span class="hljs-keyword">print</span> <span class="hljs-string">&apos; I run event %i &apos;</span> % i        
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
</code></pre>
<p>In a similar way, the simplest <em>&quot;do-nothing&quot;</em>-version of <code>configure</code>-function is </p>
<pre><code class="lang-python"><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">configure</span> <span class="hljs-params">(  datafiles ,  catalogs = [] , castor = False , params = {} )</span> :</span>   
    <span class="hljs-keyword">print</span> <span class="hljs-string">&apos;I am configuration step!&apos;</span>
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>
</code></pre>
<p>As one clearly sees, these lines do nothing useful, but they are perfectly enough
to be classified as the first Bender code. 
Moreover, the python module with these two function
can already be submitted to Ganga/Grid, and Ganga will classify it as valid Bender code.
Therefore this code is already <em>&quot;ready-for-Ganga/Grid&quot;</em>!
<div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(6174105359);" id="the-details-for-the-curious-students-how-gangagrid-treat-bender-modulesclick-to-expand"><i class="fa fa-bell"></i> The details for the curious students: how Ganga/Grid treat Bender modules?<span id="heading-6174105359">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-6174105359"><p>Actually Ganga executes at the remote node the following wrapper code</p>
<pre><code class="lang-python">files    = ... <span class="hljs-comment">## this one comes from DIRAC</span>
catalogs = ... <span class="hljs-comment">## ditto </span>
params   = ... <span class="hljs-comment">## extra parameters (if needed): this comes from the user</span>
nevents  = ... <span class="hljs-comment">## it comes from Ganga configuration</span>

<span class="hljs-keyword">import</span> USERMODULE   <span class="hljs-comment">## here it imports your module! </span>
USERMODULE.configure ( files , catalogs ,  params = params )  
USERMODULE.run       (  nevents )
</code></pre>
<p>Thats all! From this snippet you see:</p>
<ul>
<li>the code must have a stricture of python <em>module</em>  <ul>
<li>(note  the difference with respect to the <em>script</em>)</li>
</ul>
</li>
<li>it must have two functions <code>run</code> and <code>configure</code>  <ul>
<li>(everythnig else is not used)</li>
</ul>
</li>
</ul>
</div></div>
The whole script is here:
ququ  <script src="https://gist.github.com/VanyaBelyaev/328a015a409ebe3c04f94feba8f9e16f.js?file=gist0.md"></script></p>
<p>ququ1 <script src="https://gist.github.com/VanyaBelyaev/328a015a409ebe3c04f94feba8f9e16f.js"></script></p>
<p>ququ2 <a href="https://gist.github.com/VanyaBelyaev/328a015a409ebe3c04f94feba8f9e16f" target="_blank">https://gist.github.com/VanyaBelyaev/328a015a409ebe3c04f94feba8f9e16f</a></p>
<p>In practice, before the submission the jobs to Ganga/Grid, the code needs to be tested using some test-data. 
This, formally unnesessary, but very important step can be easily embedded into your module using 
python&apos;s <code>__main__</code> clause:</p>
<pre><code class="lang-python"><span class="hljs-keyword">if</span> <span class="hljs-string">&apos;__main__&apos;</span> == __name__ : 
    <span class="hljs-keyword">print</span> <span class="hljs-string">&apos;This runs only if module is used as the script! &apos;</span>
    configure ( [] , catalogs = [] , params = {} )    
    run ( <span class="hljs-number">10</span> )
</code></pre>
<script src="https://gist.github.com/VanyaBelyaev/4d96dbfa8e94379b284ec7364365dde6.js"></script> 



<h3 id="how--to-run-it-interactively">How  to run it interactively?</h3>
<p>The answer is trivial:</p>
<pre><code class="lang-bash">lb-run Bender/prod python DoNothing.py
</code></pre>
<p>That&apos;s all. Make a try and see what you get!</p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(6475539929);" id="unnesessary-but-very-useful-decorationsclick-to-expand"><i class="fa fa-bell"></i> Unnesessary but very useful decorations:<span id="heading-6475539929">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-6475539929"><p>It is highly desirable and <em>recommended</em> to put some <em>&quot;decorations&quot;</em> a top of this minimalistic lines:</p>
<ul>
<li>add magic  <code>#!/usr/bin/env python</code> line as the top line of the module/script </li>
<li>make the script executable: <code>chmod +x ./DoNothing.py</code></li>
<li>add a python documentation close to the begin of the script<ul>
<li>fill some useful python attributes with the proper informaton<ul>
<li><code>__author__</code></li>
<li><code>__date__</code></li>
<li><code>__version__</code></li>
</ul>
</li>
<li>do not forget to add documenatio in Doxygen-style and use in  comments following tags <ul>
<li><code>@file</code></li>
<li><code>@author</code></li>
<li>... </li>
</ul>
</li>
</ul>
</li>
</ul>
</div></div></p>
<p>For all subsequent lessons we&apos;ll gradually fill this script<br>with the additional functionality,  step-by-step converting 
it to something much more useful.   </p>
<p><div class="panel panel-success"><div class="panel-heading"><h3 class="panel-title" onclick="javascript:toggle(5397883115);" id="in-practice-click-to-expand"><i class="fa fa-bell"></i> In practice, ...<span id="heading-5397883115">Click to expand</span></h3></div><div class="panel-body" style="display: none" id="panel-5397883115"><p>In practice, the prepared and <em>ready-to-use</em> function <code>run</code> is imported from some of central Bender modules, 
namely <code>Bender.Main</code> and the only one really important task for the user is to code the function <code>configure</code>.
The <code>__main__</code> clause usually contains some input data for local tests:</p>
<pre><code class="lang-python"><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&apos;__main__&apos;</span> :
    <span class="hljs-comment">## job configuration</span>
    <span class="hljs-comment">## BKQuery ( &apos;/LHCb/Collision12/Beam4000GeV-VeloClosed-MagDown/Real Data/Reco14/Stripping20/WGBandQSelection7/90000000/PSIX.MDST&apos;   )</span>
    inputdata = [
        <span class="hljs-string">&apos;/lhcb/LHCb/Collision12/PSIX.MDST/00035290/0000/00035290_00000221_1.psix.mdst&apos;</span>,
        <span class="hljs-string">&apos;/lhcb/LHCb/Collision12/PSIX.MDST/00035290/0000/00035290_00000282_1.psix.mdst&apos;</span>,
        ]

    configure( inputdata , castor = <span class="hljs-keyword">True</span> )
    <span class="hljs-comment">## the event loop </span>
    run(<span class="hljs-number">10000</span>)
</code></pre>
</div></div></p>
<h2 id="hello-world"><em>Hello, world!</em></h2>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="formatting-examples.html" class="navigation navigation-prev " aria-label="Previous page: Examples of formatting">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../another-section/" class="navigation navigation-next " aria-label="Next page: Another top level section">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"The first two (useless) code","level":"2.1.2","depth":2,"next":{"title":"Another top level section","level":"3.1","depth":1,"path":"another-section/README.md","ref":"another-section/README.md","articles":[{"title":"A subsection","level":"3.1.1","depth":2,"path":"another-section/subsection.md","ref":"another-section/subsection.md","articles":[{"title":"A subsubsection","level":"3.1.1.1","depth":3,"path":"another-section/subsubsection.md","ref":"another-section/subsubsection.md","articles":[]}]}]},"previous":{"title":"Examples of formatting","level":"2.1.1","depth":2,"path":"getting-started/formatting-examples.md","ref":"getting-started/formatting-examples.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-sharing","panels@git+https://github.com/lhcb/gitbook-plugin-panels.git#master","katex-auto-render@git+https://github.com/lhcb/gitbook-plugin-katex-auto-render.git#master","collapsible-menu","otherlink"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"collapsible-menu":{},"search":{},"otherlink":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"panels":{},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"katex-auto-render":{},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"The Starterkit team and contributors","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"gitbook":"*"},"file":{"path":"getting-started/twouseless.md","mtime":"2018-03-01T16:39:16.727Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-03-01T16:41:21.201Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-panels/panels.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/katex.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/auto-render.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-katex-auto-render/enable-auto-render.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-collapsible-menu/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-otherlink/js/otherlink.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

